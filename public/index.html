<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Cadastro de Produtos</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      .form-row {
        display: flex;
        gap: 20px;
      }
      .form-row .form-group {
        flex: 1;
      }
    </style>
  </head>
  <body class="bg-light">
    <div class="container mt-5">
      <h2 class="mb-4">Cadastro de Produtos</h2>
      <form
        action="/cadastroProdutos"
        method="POST"
        id="formProdutos"  
        class="needs-validation"
      >
        <div class="form-row mb-3">
          <div class="form-group">
            <label for="codigo" class="form-label">CÃ³digo</label>
            <input
              type="text"
              class="form-control"
              id="codigo"
              name="codigo"
              required
            />
          </div>
          <div class="form-group">
            <label for="nome" class="form-label">Nome do Produto</label>
            <input
              type="text"
              class="form-control"
              id="nome"
              name="nome"
              required
            />
          </div>
          <div class="form-group">
            <label for="valor" class="form-label">Valor (R$)</label>
            <input
              type="text"
              class="form-control"
              id="valor"
              name="valor"
              required
            />
          </div>
        </div>
        <button type="submit" class="btn btn-success">Cadastrar</button>
      </form>
    </div>

    <script>
      const inputValor = document.getElementById('valor');
      const form = document.getElementById('formProdutos');

      inputValor.addEventListener('input', function (e) {
        let valor = e.target.value.replace(/\D/g, '');

        if (valor.length === 0) {
          e.target.value = '';
          return;
        }

        valor = (parseInt(valor, 10) / 100).toFixed(2);
        valor = valor.replace('.', ',');
        valor = 'R$ ' + valor.replace(/\B(?=(\d{3})+(?!\d))/g, '.');

        e.target.value = valor;
      });

      form.addEventListener('submit', function () {
        let valor = inputValor.value;

        valor = valor.replace(/[R$\s.]/g, '').replace(',', '.');
        inputValor.value = valor;
      });
    </script>
  </body>
</html>